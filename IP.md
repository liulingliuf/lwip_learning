网际协议(IP)
主要内容:
    IP地址及其分类、特殊IP地址
    子网划分、子网掩码、NAT等概念
    IP层数据报结构以及数据报输入处理
    IP分片数据的重装过程

10.1 相关知识
10.1.1 概述
    互联网功能是分组交付系统，能将分组从一个地方交付到另一个地址。IP协议是关键
    IP是一种不可靠的无链接数据报协议；不会对运载数据进行差错校验和跟踪

10.1.2 IP地址
    在TCP/IP设计过程中，每台主机分配一个唯一的32bit的IP地址
    分类编址：A,B,C,D,E五类
    A:0~127.host.host.host;128个网络，256*256*256个主机;0,10,127特殊用途
    B:128~191.0~255.host.host;64*256个网络，256*256个主机;172.16~172.31保留，B类网络专用
    C:192~223.0~255.0~255.host;32*256*256个网络，256个主机;192.168.0~192.168.255保留，C类网络专用
    D:1110xxxx.8*x.8*x.8*x multicast;
    E:1111xxxx.8*x.8*x.8*x;未用 255.255.255.255子网广播;

10.1.3 特殊IP地址
    以下6类IP不能分配给任何主机
        回环地址:127.x.x.x回环地址,为了本机软件测试和进程通信提供方便
        网络地址:主机地址部分全部为0的地址。例如:134.89.0.0
        直接广播地址:主机地址全部为1的地址。例如:134.89.255.255,192.168.10.255
        受限广播地址:255.255.255.255；向本地网络中的所有主机广播消息。本能作为源地址/*fixed me*/
        本网络上的特定主机:与本网络内部特定主机通信，可将网络全部置0，则表示发给特定主机.例如:0.0.11.32
        本网络本主机:0.0.0.0;主机启动时使用
    一下3类专用地址可以被分配给多个主机，这些主机之间应不相关，即处于相互独立的专用网络之内。
        A:10.0.0.0~10.255.255.255; 1个网络，16777216个主机
        B:172.1.0.0~172.31.255.255；16个网络，每个网络65536个主机
        C:192.168.0.0~192.168.255.255；256个网络，每个网络256个主机

10.1.4 子网划分和子网掩码
    子网编址：进一步将网络划分为子网的设计，允许多个网络共享一个网络前缀，每个子网都有自己的子网地址。
    好处：
        第一，减少标准IP编址中的地址浪费。
        第二，节省通信流量。一方面，使得各个网段的通信量相互分隔开，另一方面，减少不必要的通信流量，如广播，多播。
        第三，每个网段的主机数减少，使得主机的管理更加方便。
    
    对于一个路由器或者主机，当他接收到一个数据包，若要判断发送数据包的源主机与自己是否处于一个网络内，可以将源IP地址与子网掩码进行与运算，即得到源主机处的网络地址。同样，将自己的IP地址与子网掩码进行与运算，得到自己所处的网络地址，如果这两个网络地址相同，则可以判断出发送方与自己处于同一个网络。

    子网掩码不能单独存在，它必须结合IP地址一起使用，子网掩码只有一个作用，就是讲某个IP地址划分为网络好和主机号两部分。

10.1.5 网络转换地址（NAT）
    问题:IP地址短缺，ISP只会分配给企业几个或者十几个IP地址，不能满足企业需求
    方案:局域网技术。
    局域网技术:
        本质为专用网络一种类型，它允许机构内部访问共同的资源，对外部网络屏蔽了网络的结构和主机信息，提高了内部主机的安全性。
        多个用户同时公用一个合法IP地址与外部通信。

    网络地址转换(NAT):
        内部端口：与局域网内部用户通信使用，使用内部一个专用IP地址，例如192.168.1.1
        外部端口：用来与外部网络通信使用，通常具有一个有效的IP地址。
        功能描述：当内部网络用户连接互联网是，NAT将用户的内部IP地址转换成一个外部公共IP地址，反之，数据从外部返回时，NAT将目的地址替换成用户的内部IP地址。
        实现方式：很多种，常用的端口多路复用。
        端口多路复用：基于TCP或UDP协议端口号以及IP地址来实现NAT功能
                     内部192.168.1.78：1234 想要访问130.21.45.20:80, 同时假设路由器的外部IP为222.178,197.21
                     具有NAT功能的路由器内部会维护一张NAT转换表，接收到这个分组后，会在表中未连接分配一个路由器内部的NAT端口号，假设为 5678
                     路由器转发数据包中的信息为：(222.178.197.21:5678，130.21.45.20:80)
                     
                     外部服务响应时：(130.21.45.20:80，222.178.197.21:5678)
                     路由器接收到数据包，根据NAT表将IP信息转换为：(130.21.45.20:80，192.168.1.78.1234)

10.1.6 单播、多播与广播
    单播
    多播
    广播

10.2 数据报
10.2.1数据报组成结构



                     


        
